{{define "Index"}}
{{template "_head"}}
{{template "_menu"}}

<body style="background-color: #0a0f1f; font-family: 'Poppins', sans-serif; color: #f5f5f5;">

    <div class="container mt-5">
        <div class="text-center mb-4">
            <h1 class="fw-bold" style="color: #4fc3f7;">Lista de Produtos</h1>
            <p class="text-secondary" style="color: #a1b3c5;">Gerencie seus produtos com praticidade e estilo</p>
        </div>

        <section class="card shadow-lg border-0"
            style="background: linear-gradient(145deg, #12192c, #0f1423); border-radius: 15px;">
            <div class="card-body p-4">

                <div class="table-responsive" style="overflow-x: hidden;">
                    <table class="table table-dark-custom table-hover table-borderless align-middle mb-0 w-100">
                        <thead>
                            <tr>
                                <th><i class="bi bi-box-seam"></i> Nome</th>
                                <th><i class="bi bi-card-text"></i> Descrição</th>
                                <th><i class="bi bi-cash-stack"></i> Preço</th>
                                <th><i class="bi bi-archive"></i> Quantidade</th>
                                <th colspan="2" class="text-center"><i class="bi bi-gear"></i> Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .}}
                            <tr>
                                <td class="py-2">{{.Nome}}</td>
                                <td class="py-2">{{.Descricao}}</td>
                                <td class="py-2">R$ {{.Preco}}</td>
                                <td class="py-2">{{.Quantidade}}</td>
                                <td class="text-center py-2">
                                    <a href="edit?id={{.Id}}" class="btn btn-sm d-inline-flex align-items-center gap-2"
                                        style="background: #4fc3f7; color: #0a0f1f; border: none; padding: 6px 12px; border-radius: 8px;">
                                        <i class="bi bi-pencil-square"></i> Editar
                                    </a>
                                </td>
                                <td class="text-center py-2">
                                    <button data-bs-toggle="modal" data-bs-target="#deleteModal"
                                        onclick="setDeleteId('{{.Id}}')"
                                        class="btn btn-sm d-inline-flex align-items-center gap-2"
                                        style="background: #ef5350; color: white; border: none; padding: 6px 12px; border-radius: 8px;">
                                        <i class="bi bi-trash3"></i> Deletar
                                    </button>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card-footer text-center"
                style="background: #10172b; border-top: 1px solid #1a2138; border-radius: 0 0 15px 15px;">
                <a href="/new" class="btn btn-lg d-inline-flex align-items-center gap-2"
                    style="background: #4fc3f7; color: #0a0f1f; border: none; font-weight: 600; padding: 10px 24px; border-radius: 10px;">
                    <i class="bi bi-plus-circle"></i> Criar novo produto
                </a>
            </div>
        </section>
    </div>

    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background-color: #0f1423; color: #f5f5f5; border-radius: 15px;">
                <div class="modal-header" style="border-bottom: 1px solid #1a2138;">
                    <h5 class="modal-title" id="deleteModalLabel">Confirmar exclusão</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Tem certeza que deseja deletar este produto?
                </div>
                <div class="modal-footer" style="border-top: 1px solid #1a2138;">
                    <button type="button" class="btn btn-secondary">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Deletar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let deleteId = null;
        function setDeleteId(id) { deleteId = id; }
        document.getElementById("confirmDeleteBtn").addEventListener("click", function () {
            if (deleteId) window.location = "/delete?id=" + deleteId;
        });
    </script>

    <style>
        .table-dark-custom th {
            background-color: #1a2138;
            color: #4fc3f7;
        }

        .table-dark-custom td {
            background-color: #12192c;
            color: #e3f2fd;
        }

        .table-dark-custom tbody tr:hover {
            background: rgba(79, 195, 247, 0.08);
            transform: scale(1.01);
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }
    </style>

</body>
</html>
{{end}}
